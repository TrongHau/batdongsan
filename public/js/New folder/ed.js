var ED_CONST={JS_VERSION:13,ED_API:{GET_VERSION_TEST:"https://log."+LOG_BDS_CONSTANTS.WEB_DOMAIN+"/ed?d="+LOG_BDS_CONSTANTS.WEB_DOMAIN},TIME_OUT:{COOKIE_EXPERIMENTAL_DESIGN:30,CHECK_VERSIONS_DATA_READY:300},ED_VERSIONS:{BDS:{NEWS_RELEASE_HEADER_BUTTON:{VERSION_0:"1.0.0",VERSION_1:"1.0.1",VERSION_2:"1.0.2"},NEWS_LETTER_RIGHT_BTN_DETAIL_PAGE_DESKTOP:{VERSION_0:"1.1.0",VERSION_1:"1.1.1"}}},KEY_LOCAL_STORAGE:{VERSIONS:"experimental_design_versions"},LOG_OUT:{CSS_LOG_OUT:'a[onclick*="LogOut"]',TEXT_LOG_OUT:"Thoát"},LOG_IN:{CSS_LOG_IN:'div[class="header-middle-righ-link"] a[href="#"]',TEXT_LOG_IN:"Đăng nhập"}},ed_global_var={versions_ready:!1,is_load_done:!1};function ExperimentalDesign(){this.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},this.getXmlHTTPRequest=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.stopInterval=function(e){clearInterval(e)},this.getVersions=function(){try{var e=localStorage.getItem(ED_CONST.KEY_LOCAL_STORAGE.VERSIONS);if(e&&void 0!==e&&""!=e){var t=JSON.parse(e);if(null!=t&&null!=t){var n=t.expire,r=t.value,o=t.version;if(o&&o>=ED_CONST.JS_VERSION&&n>(new Date).getTime())return ed_global_var.versions_ready||(ed_global_var.versions_ready=!0),r}}return""}catch(e){console.log(e)}},this.getVersionFromServer=function(){try{var e=this.getXmlHTTPRequest();e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE&&200==e.status){var t=e.responseText.trim();if(t&&void 0!==t&&""!=t){ed_global_var.versions_ready||(ed_global_var.versions_ready=!0);var n={value:t,expire:(new Date).getTime()+60*ED_CONST.TIME_OUT.COOKIE_EXPERIMENTAL_DESIGN*1e3,version:ED_CONST.JS_VERSION};localStorage.setItem(ED_CONST.KEY_LOCAL_STORAGE.VERSIONS,JSON.stringify(n))}}};var t=ED_CONST.ED_API.GET_VERSION_TEST;userInfo.email&&null!=userInfo.email&&""!=userInfo.email&&(t=t+"&e="+userInfo.email);var n=this.getCookie(LOG_CONSTANTS.COOKIE.USER_SESSION_KEY);n&&null!=n&&""!=n&&(t=t+"&u="+n);var r=this.getCookie(LOG_CONSTANTS.COOKIE.SESSION_KEY);r&&null!=r&&""!=r&&(t=t+"&s="+r),e.open("POST",t,!0),e.setRequestHeader("Content-type","application/json;charset=utf-8"),e.setRequestHeader("Content-Encoding","gzip"),e.withCredentials=!0,e.send()}catch(e){console.log(e)}},this.newsReleaseButtonHeaderChange=function(e){try{ChangeUserStyle(),this.stopInterval(e);var t=this.getCookie("userinfo");t&&null!=t&&""!=t.trim()&&ChangeUserStyleExtra()}catch(e){console.log(e)}},this.newsReleaseButtonHeader=function(){ChangeUserStyle();var e=setInterval(function(){var t=ed.getCookie("userinfo");t&&null!=t&&""!=t.trim()&&null!=document.querySelector(ED_CONST.LOG_OUT.CSS_LOG_OUT)&&null!=document.querySelector(ED_CONST.LOG_OUT.CSS_LOG_OUT)&&ed.newsReleaseButtonHeaderChange(e)},ED_CONST.TIME_OUT.CHECK_VERSIONS_DATA_READY)},this.newsLetterRightBtnDetailPageDesktop=function(){try{var e=document.URL;null!=e&&null!=e&&""!=e&&e.match(/pr[0-9]+$/g)&&(ChangeNewsletterStyle(),ChangeNewsletterStyleDetail())}catch(e){console.log(e)}},this.processVersion=function(e){try{e.startsWith("1.0")?this.newsReleaseButtonHeader():e.startsWith("1.1")&&this.newsLetterRightBtnDetailPageDesktop()}catch(e){console.log(e)}},this.processVersions=function(e){this.stopInterval(e);var t=this.getVersions();if(t&&void 0!==t&&""!=t)for(var n=JSON.parse(t),r=0;r<n.length;r++){var o=n[r];this.processVersion(o)}}}var ed=new ExperimentalDesign;function experimentalDesignWindowOnLoadInitForLog(){try{if(!ed_global_var.is_load_done){ed_global_var.is_load_done=!0;var e=setInterval(function(){ed_global_var.versions_ready&&ed.processVersions(e)},ED_CONST.TIME_OUT.CHECK_VERSIONS_DATA_READY)}}catch(e){console.log(e)}}try{ed.getVersionFromServer(),experimentalDesignWindowOnLoadInitForLog()}catch(e){console.log(e)}