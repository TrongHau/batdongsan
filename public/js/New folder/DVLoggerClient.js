var LOG_BDS_CONSTANTS={WEB_ALL_DOMAIN:".batdongsan.com.vn",WEB_DOMAIN:"batdongsan.com.vn",WEB_KEY_API:"bds"},LOG_CONSTANTS={BATDONGSAN_WEB_ID:1,TOPBANK_WEB_ID:2,BANXEHOI_WEB_ID:3,TINNHAC_WEB_ID:4,TINXE_WEB_ID:5,CHOBROD_WEB_ID:6,CINTAMOBIL_WEB_ID:7,PHIKOTSE_WEB_ID:8,version:10,URL:{EXPERIMENTAL_DESIGN_JS:"https://log."+LOG_BDS_CONSTANTS.WEB_DOMAIN+"/js/bds/ed.js?v="+(new Date).getTime(),LINK_GET_GEO_IP_ADDRESS:"//geoip.nekudo.com/api/",USER_HANDLER:"/HandlerWeb/UserHandler.ashx?type=getuserstatus",LOG_SERVER:"https://log."+LOG_BDS_CONSTANTS.WEB_DOMAIN+"/"+LOG_BDS_CONSTANTS.WEB_KEY_API+"lp",LOG_SERVER_IMAGE_REQUEST:"https://log."+LOG_BDS_CONSTANTS.WEB_DOMAIN+"/"+LOG_BDS_CONSTANTS.WEB_KEY_API+"lg"},COOKIE:{USER_INFO_KEY_COOKIE:"uitb",USER_SESSION_KEY:"usidtb",SESSION_KEY:"sidtb"},LOCAL_STORAGE:{IP_LOCATION_ADDRESS_KEY:"ipLocationAdress",LOG_CLICK_COOKIE_KEY:"logClickCookie",LOG_ENTER_UP_COOKIE_KEY:"logEnterUpCookie",VERSIONS:"experimental_design_versions",TIME_ON_SITE_ONLY:"time_on_site",LOG_TIME_ON_SITE_KEY:"logTimeOnSitePreviousPage"},CLIENT_IP:{KEY_IP_ADDRESS_RESPONSE:"ip",KEY_CITY_ADDRESS_RESPONSE:"city",KEY_REGION_ADDRESS_RESPONSE:"city",KEY_COUNTRY_ADDRESS_RESPONSE:"country",KEY_COUNTRY_NAME_ADDRESS_RESPONSE:"name"},SEND_LOG_TYPE:{IMAGE:"image",XHR:"xhr",BEACON:"beacon"},ACTION_TYPE:{PAGE_VIEW:185,WINDOW_SCROLL:188,CLICK_LOCATION:189,CLICK_LINK_NOIBAT:190,MOUSE_CLICK:191,MOUSE_MOVE_OVER:192,MOUSE_MOVE_STOP:193,UNLOAD:194,ENTER_UP:195},THRESHOLD:{COOKIE_LENGTH:32,TOKEN_LENGTH:32,GET_REQUEST_MAX_LENGTH:2048,USER_SESSION_TIMEOUT:3650,SROLL_PIXEL_MAX:400,MOUSE_MOUVE_STOP_TIMEOUT:1e3,SEARCH_BOX_TAG_TIMEOUT:300,SCROLL_TIMEOUT:1e3,IP_ADDRESS_COOKIE_TIMEOUT:.5,USER_INFO_KEY_COOKIE:3650,MAX_LENGTH_OUTER_HTML:512},KEY_CODE:{ENTER:13,UP:38,DOWN:40,PAGE_UP:33,PAGE_DOWN:34},current_pagey_offset:0,ID_SEARCH_BOXS:["txt1","txtAutoComplete","email","txtChatPhoneNumber","txtChatName","txtChatEmail","txtName","txtEmail","txtMobile","txtLink","txtContent"],CSS_OBJECT_LOG_MOUSE_MOVES:[]},globalVar={lastPressKeyTime:0,currentKeycode:0,lastScrollTime:0,lastMouseMoveStopTime:0,mousePositionX:-1,mousePositionY:-1,isLogPageView:!1,loggerAndSearchTextBox:!1,addMouseClickEvent:!1,addMouseMoveAndStopEvent:!1,addScrollLog:!1,addBeforeUnload:!1,tracking:!1,start_time_active_tab:0,is_active:!0,time_on_site:new Number(0)},userInfo={id:"",name:"",email:"",mobile:"",age:"0",identify_card_number:"0",time:0};function Logger(){try{function e(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,o){if(null!==e)if(t&&e.forEach===t)e.forEach(n,o);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(n.call(o,e[r],r,e)==={})return}else for(var a in e)if(e.hasOwnProperty(a)&&n.call(o,e[a],a,e)==={})return},this.map=function(e,t,o){var r=[];return null==e?r:n&&e.map===n?e.map(t,o):(this.each(e,function(e,n,i){r[r.length]=t.call(o,e,n,i)}),r)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.screen_orientation=e.screen_orientation,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)}function t(){this.i,this.o}function n(){this.i,this.h,this.t,this.p,this.a,this.o,this.ad,this.gy,this.ey,this.gx,this.ex,this.pt,this.dp,this.dn,this.zn,this.loc}this.getXHR=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.makeId=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},this.createLogObject=function(t,n){return new function(t,n){this.user_id=userInfo.id,this.email=userInfo.email,this.mobile=userInfo.mobile,this.name=userInfo.name,this.age=userInfo.age,this.id_card=userInfo.identify_card_number;try{var o=localStorage.getItem(LOG_CONSTANTS.LOCAL_STORAGE.VERSIONS);if(o&&null!=o&&""!=o){var r=JSON.parse(o);r&&null!=r&&r.value&&null!=r.value&&""!=r.value&&(this.version=r.value)}}catch(e){console.log(e)}this.action_id=t;try{this.data=JSON.stringify(n)}catch(e){console.log(e)}this.web_id=LOG_CONSTANTS.BATDONGSAN_WEB_ID,this.mouse_pos_x=globalVar.mousePositionX,this.mouse_pos_y=globalVar.mousePositionY,this.page_y_offset=window.pageYOffset,this.page_x_offset=window.pageXOffset,this.scroll_width=document.documentElement.scrollWidth,this.scroll_height=document.documentElement.scrollHeight,this.current_uri=document.URL,this.refer_uri=document.referrer,this.time=(new Date).getTime(),this.session_id,this.user_session_id,this.browser_finger_print,this.screen_width,this.screen_height,this.browser_width,this.browser_height,this.os_info,this.browser_info,this.is_mobile,this.ip_address="",this.city="",this.region="",this.country="",this.send_time,this.prepareLogObjectData=function(t){this.session_id=t.getSessionId(),this.user_session_id=t.getUserSessionId(),this.browser_finger_print=(new e).get();var n=t.getBrowserAndOSInfo();this.screen_width=n.screenWidth,this.screen_height=n.screenHeight,this.browser_width=window.innerWidth,this.browser_height=window.innerHeight,this.os_info=n.os+" "+n.osVersion,this.browser_info=n.browser+" "+n.browserMajorVersion+" ("+n.browserVersion+")\n",this.is_mobile=n.mobile;var o=t.getIPLocationAddress();o&&null!=o?(this.ip_address=o[LOG_CONSTANTS.CLIENT_IP.KEY_IP_ADDRESS_RESPONSE],this.city=o[LOG_CONSTANTS.CLIENT_IP.KEY_CITY_ADDRESS_RESPONSE],this.region=o[LOG_CONSTANTS.CLIENT_IP.KEY_REGION_ADDRESS_RESPONSE],this.country=o[LOG_CONSTANTS.CLIENT_IP.KEY_COUNTRY_ADDRESS_RESPONSE]):this.getIPLocationAddressFromAPI()}}(t,n)},this.createData=function(){return new function(){this.timeOnSite,this.timestamp,this.target=new Object,this.searchContent,this.ci,this.di,this.wi,this.si,this.pi,this.cc,this.vdi=new n,this.vdis=[],this.is=[],this.titleFooter}},e.prototype={get:function(){var e=[];if(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution){var t=this.getScreenResolution();void 0!==t&&e.push(t.join("x"))}return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,o,r,i,a,l,s,c;for(n=3&e.length,o=e.length-n,r=t,a=3432918353,l=461845907,c=0;c<o;)s=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(i=5*(65535&(r=(r^=s=(65535&(s=(s=(65535&s)*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*l+(((s>>>16)*l&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(s=0,n){case 3:s^=(255&e.charCodeAt(c+2))<<16;case 2:s^=(255&e.charCodeAt(c+1))<<8;case 1:r^=s=(65535&(s=(s=(65535&(s^=255&e.charCodeAt(c)))*a+(((s>>>16)*a&65535)<<16)&4294967295)<<15|s>>>17))*l+(((s>>>16)*l&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){return this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";")}return""},getScreenResolution:function(){return this.screen_orientation?screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]:[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="logger"+LOG_BDS_CONSTANTS.WEB_ALL_DOMAIN;return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},this.getSessionId=function(){var e=this.getCookie(LOG_CONSTANTS.COOKIE.SESSION_KEY);return e&&null!=e&&""!=e?(this.setCookie(LOG_CONSTANTS.COOKIE.SESSION_KEY,e),e):(e=this.makeId(LOG_CONSTANTS.THRESHOLD.COOKIE_LENGTH),this.setCookie(LOG_CONSTANTS.COOKIE.SESSION_KEY,e),e)},this.getUserSessionId=function(){var e=this.getCookie(LOG_CONSTANTS.COOKIE.USER_SESSION_KEY);return e&&null!=e&&""!=e?(this.setCookie(LOG_CONSTANTS.COOKIE.USER_SESSION_KEY,e,LOG_CONSTANTS.THRESHOLD.USER_SESSION_TIMEOUT),e):(e=this.makeId(LOG_CONSTANTS.THRESHOLD.COOKIE_LENGTH),this.setCookie(LOG_CONSTANTS.COOKIE.USER_SESSION_KEY,e,LOG_CONSTANTS.THRESHOLD.USER_SESSION_TIMEOUT),e)},this.getCurrentURI=function(){return document.URL},this.setCookie=function(e,t,n){var o="",r=new Date;if(void 0!==n)r.setTime(r.getTime()+24*n*60*60*1e3),o="expires="+r.toUTCString();else{var i=new Date(r.getFullYear(),r.getMonth()+1,r.getDate()+1);r.setTime(Math.min(r.getTime()+18e5,i.getTime())),o="expires="+r.toUTCString()}document.cookie=e+"="+t+";"+o+";path=/;domain="+LOG_BDS_CONSTANTS.WEB_ALL_DOMAIN},this.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},this.sendLog=function(e){e.sendTime=(new Date).getTime(),encodeURIComponent(JSON.stringify(e)).length<LOG_CONSTANTS.THRESHOLD.GET_REQUEST_MAX_LENGTH?this.sendLogByGetImageRequest(e):this.postLogXHR(e)},this.sendLogByGetImageRequest=function(e){var t=JSON.stringify(e),n=new Image;n.style.display="none",n.onload=function(){document.body.appendChild(n)},n.src=LOG_CONSTANTS.URL.LOG_SERVER_IMAGE_REQUEST+"?log="+encodeURIComponent(t),this.processRemoveLocalStorage(e)},this.processRemoveLocalStorage=function(e){e.action_id==LOG_CONSTANTS.ACTION_TYPE.MOUSE_CLICK?localStorage.removeItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_CLICK_COOKIE_KEY+e.time):e.action_id==LOG_CONSTANTS.ACTION_TYPE.ENTER_UP?localStorage.removeItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_ENTER_UP_COOKIE_KEY+e.time):e.action_id==LOG_CONSTANTS.ACTION_TYPE.UNLOAD&&localStorage.removeItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_TIME_ON_SITE_KEY+e.time)},this.sendXHRLog=function(e){e.sendTime=(new Date).getTime(),this.postLogXHR(e)},this.postLogXHR=function(e){var t=JSON.stringify(e);try{var n=this.getXHR();n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&n.status>=200&&n.status<300&&logger.processRemoveLocalStorage(e)},n.open("POST",LOG_CONSTANTS.URL.LOG_SERVER,!0),n.setRequestHeader("Content-type","application/json;charset=utf-8"),n.setRequestHeader("Content-Encoding","gzip"),n.withCredentials=!0,n.send(t)}catch(e){globalVar.tracking&&console.log(e)}},this.getIPLocationAddressFromAPI=function(){try{window.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;var e=new RTCPeerConnection({iceServers:[]}),t=function(){};e.createDataChannel(""),e.createOffer(e.setLocalDescription.bind(e),t),e.onicecandidate=function(n){if(n&&n.candidate&&n.candidate.candidate){var o=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/.exec(n.candidate.candidate)[1],r=new Object;r[LOG_CONSTANTS.CLIENT_IP.KEY_IP_ADDRESS_RESPONSE]=o,localStorage.setItem(LOG_CONSTANTS.LOCAL_STORAGE.IP_LOCATION_ADDRESS_KEY,JSON.stringify(r)),e.onicecandidate=t}}}catch(e){globalVar.tracking&&console.log(e)}return null},this.getIPLocationAddress=function(){var e=localStorage.getItem(LOG_CONSTANTS.LOCAL_STORAGE.IP_LOCATION_ADDRESS_KEY);try{if(e&&null!=e&&""!=e)return JSON.parse(e)}catch(e){globalVar.tracking&&console.log(e)}return null},this.getLocationFromElement=function(e,t){try{t.gy=e.getBoundingClientRect().top-document.body.getBoundingClientRect().top}catch(e){globalVar.tracking&&console.log(e)}try{t.gx=e.getBoundingClientRect().left-document.body.getBoundingClientRect().left}catch(e){globalVar.tracking&&console.log(e)}try{t.ey=e.offsetHeight}catch(e){globalVar.tracking&&console.log(e)}try{t.ex=e.offsetWidth}catch(e){globalVar.tracking&&console.log(e)}},this.getInputData=function(){for(var e=[],n=document.querySelectorAll('input[type="text"],input[type="file"],input[type="email"],input[type="datetime-local"],input[type="date"],input[type="color"],input[type="checkbox"]'),o=0;o<n.length;o++){var r=n[o],i=new t;i.i=r.value,r.outerHTML&&null!=r.outerHTML&&""!=r.outerHTML&&(r.outerHTML.length>LOG_CONSTANTS.THRESHOLD.MAX_LENGTH_OUTER_HTML/16?i.o=r.outerHTML.substring(0,Math.max(LOG_CONSTANTS.THRESHOLD.MAX_LENGTH_OUTER_HTML/16,r.outerHTML.indexOf(">")+1)):i.o=r.outerHTML),e[o]=i}return e},this.getDescriptionDesktop=function(){var e=document.querySelector('div[class="Title"] div[class="Footer"]');if(null!=e){for(var t=e.childNodes,n=[],o=0;o<t.length;o++)n[o]=t[o].textContent.trim();return n}return null},this.getDescriptionMobile=function(){var e=[],t=0,n=document.querySelector('div[class="sr-title"] h1');null!=n&&null!=n&&(e[t]=n.innerText.trim(),t++);var o=document.querySelectorAll('div[class="sr-title"] div[class="div-plance"] div');if(null!=o&&null!=o)for(var r=0;r<o.length;r++){var i=o[r];if(null!=i&&null!=i){var a=i.childNodes;if(null!=a&&null!=a)for(var l=0;l<a.length;l++)e[t]=a[l].textContent.trim(),t++}}return null!=(n=document.querySelector('div[class^="sr-title"] div[class="div-count"]'))&&(e[t]=n.innerText.trim()),e},this.getBrowserAndOSInfo=function(){return null==window.jscd&&this.extractBrowserAndOSInfo(),window.jscd},this.extractBrowserAndOSInfo=function(){var e="";screen.width&&(width=screen.width?screen.width:"",height=screen.height?screen.height:"",e+=width+" x "+height);var t,n,o,r=navigator.appVersion,i=navigator.userAgent,a=navigator.appName,l=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);-1!=(n=i.indexOf("Opera"))&&(a="Opera",l=i.substring(n+6),-1!=(n=i.indexOf("Version"))&&(l=i.substring(n+8))),-1!=(n=i.indexOf("OPR"))?(a="Opera",l=i.substring(n+4)):-1!=(n=i.indexOf("Edge"))?(a="Microsoft Edge",l=i.substring(n+5)):-1!=(n=i.indexOf("MSIE"))?(a="Microsoft Internet Explorer",l=i.substring(n+5)):-1!=(n=i.indexOf("Chrome"))?(a="Chrome",l=i.substring(n+7)):-1!=(n=i.indexOf("Safari"))?(a="Safari",l=i.substring(n+7),-1!=(n=i.indexOf("Version"))&&(l=i.substring(n+8))):-1!=(n=i.indexOf("Firefox"))?(a="Firefox",l=i.substring(n+8)):-1!=i.indexOf("Trident/")?(a="Microsoft Internet Explorer",l=i.substring(i.indexOf("rv:")+3)):(t=i.lastIndexOf(" ")+1)<(n=i.lastIndexOf("/"))&&(a=i.substring(t,n),l=i.substring(n+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(o=l.indexOf(";"))&&(l=l.substring(0,o)),-1!=(o=l.indexOf(" "))&&(l=l.substring(0,o)),-1!=(o=l.indexOf(")"))&&(l=l.substring(0,o)),s=parseInt(""+l,10),isNaN(s)&&(l=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(r),g=!!navigator.cookieEnabled;void 0!==navigator.cookieEnabled||g||(document.cookie="testcookie",g=-1!=document.cookie.indexOf("testcookie"));var d="-",u=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var h in u){var S=u[h];if(S.r.test(i)){d=S.s;break}}var _="-";switch(/Windows/.test(d)&&(_=/Windows (.*)/.exec(d)[1],d="Windows"),d){case"Mac OS X":_=/Mac OS X (10[\.\_\d]+)/.exec(i)[1];break;case"Android":_=/Android ([\.\_\d]+)/.exec(i)[1];break;case"iOS":_=(_=/OS (\d+)_(\d+)_?(\d+)?/.exec(r))[1]+"."+_[2]+"."+(0|_[3])}var O="no check";if("undefined"!=typeof swfobject){var m=swfobject.getFlashPlayerVersion();O=m.major>0?m.major+"."+m.minor+" r"+m.release:"-"}window.jscd={screen:e,screenWidth:width,screenHeight:height,browser:a,browserVersion:l,browserMajorVersion:s,mobile:c,os:d,osVersion:_,cookies:g,flashVersion:O}},this.pageViewLog=function(){var e=document.URL,t=null;e.indexOf("//m.")>=0&&e.indexOf(LOG_BDS_CONSTANTS.WEB_DOMAIN)>=0?(t=this.getPageViewDataMobile()).is=this.getInputData():(t=this.getPageViewDataDesktop()).is=this.getInputData(),null==this.parseIdFromUrl(e)&&(e.indexOf("//m.")>=0&&e.indexOf(LOG_BDS_CONSTANTS.WEB_DOMAIN)>=0?t.titleFooter=this.getDescriptionMobile():t.titleFooter=this.getDescriptionDesktop());var n=this.createLogObject(LOG_CONSTANTS.ACTION_TYPE.PAGE_VIEW,t);n.prepareLogObjectData(this),this.sendXHRLog(n)},this.mouseClickLog=function(e){try{var t=e.target||e.srcElement,n=this.createData();if(null!=t&&null!=t){try{for(var o=t.attributes,r=0;r<o.length;r++){var i=o[r];n.target[i.nodeName]=i.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target.tagName=t.tagName}catch(e){globalVar.tracking&&console.log(e)}var a=t.parentElement;if(null==a||null==a);else{try{for(o=a.attributes,r=0;r<o.length;r++){i=o[r];n.target["parent_"+i.nodeName]=i.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target.parent_tagName=a.tagName}catch(e){globalVar.tracking&&console.log(e)}var l=a;for(r=1;r<100&&(null!=(l=l.parentElement)&&null!=l);r++){try{for(var s=l.attributes,c=0;c<s.length;c++){var g=s[c];n.target["parent_"+r+"_"+g.nodeName]=g.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target["parent_"+r+"_tagName"]=l.tagName}catch(e){globalVar.tracking&&console.log(e)}}}}n.is=this.getInputData();var d=this.createLogObject(LOG_CONSTANTS.ACTION_TYPE.MOUSE_CLICK,n);d.prepareLogObjectData(this),localStorage.setItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_CLICK_COOKIE_KEY+d.time,JSON.stringify(d)),this.sendXHRLog(d)}catch(e){globalVar.tracking&&console.log(e)}},this.mouseMoveAndStopLog=function(e){try{globalVar.lastMouseMoveStopTime=(new Date).getTime(),globalVar.mousePositionX=null!=e.pageX?e.pageX:-1,globalVar.mousePositionY=null!=e.pageY?e.pageY:-1,setTimeout(function(){try{if((new Date).getTime()-globalVar.lastMouseMoveStopTime>=LOG_CONSTANTS.THRESHOLD.MOUSE_MOUVE_STOP_TIMEOUT){var t=e.target||e.srcElement,n=logger.createData();if(null!=t&&null!=t){try{for(var o=t.attributes,r=0;r<o.length;r++){var i=o[r];n.target[i.nodeName]=i.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target.tagName=t.tagName}catch(e){globalVar.tracking&&console.log(e)}var a=t.parentElement;if(null==a||null==a);else{try{for(o=a.attributes,r=0;r<o.length;r++){i=o[r];n.target["parent_"+i.nodeName]=i.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target.parent_tagName=a.tagName}catch(e){globalVar.tracking&&console.log(e)}var l=a;for(r=1;r<100&&(null!=(l=l.parentElement)&&null!=l);r++){try{for(var s=l.attributes,c=0;c<s.length;c++){var g=s[c];n.target["parent_"+r+"_"+g.nodeName]=g.nodeValue}}catch(e){globalVar.tracking&&console.log(e)}try{n.target["parent_"+r+"_tagName"]=l.tagName}catch(e){globalVar.tracking&&console.log(e)}}}}var d=logger.createLogObject(LOG_CONSTANTS.ACTION_TYPE.MOUSE_MOVE_STOP,n);d.prepareLogObjectData(logger),logger.sendLog(d)}}catch(e){globalVar.tracking&&console.log(e)}},LOG_CONSTANTS.THRESHOLD.MOUSE_MOUVE_STOP_TIMEOUT)}catch(e){globalVar.tracking&&console.log(e)}},this.enterUpLog=function(){try{var e=this.createData();e.target.text_search=[];for(var t=0,n=0;n<LOG_CONSTANTS.ID_SEARCH_BOXS.length;n++){var o=LOG_CONSTANTS.ID_SEARCH_BOXS[n],r=document.getElementById(o);if(null!=r&&null!=r){var i=r.value,a=new Object;a.text_search=i,a.id_text_search=o,e.target.text_search[t]=a,t++}}var l=this.createLogObject(LOG_CONSTANTS.ACTION_TYPE.ENTER_UP,e);l.prepareLogObjectData(this),localStorage.setItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_ENTER_UP_COOKIE_KEY+l.time,JSON.stringify(l)),this.sendXHRLog(l)}catch(e){globalVar.tracking&&console.log(e)}},this.scrollLog=function(){try{if((new Date).getTime()-globalVar.lastScrollTime>=LOG_CONSTANTS.THRESHOLD.SCROLL_TIMEOUT){var e=this.createLogObject(LOG_CONSTANTS.ACTION_TYPE.WINDOW_SCROLL,null);e.prepareLogObjectData(this),this.sendLog(e)}}catch(e){globalVar.tracking&&console.log(e)}},this.timeOnSiteLog=function(){try{var e=(new Date).getTime(),t=this.createData();t.timeOnSite=globalVar.time_on_site,t.timestamp=e,t.is=this.getInputData();var n=this.createLogObject(LOG_CONSTANTS.ACTION_TYPE.UNLOAD,t);n.prepareLogObjectData(this),localStorage.setItem(LOG_CONSTANTS.LOCAL_STORAGE.LOG_TIME_ON_SITE_KEY+n.time,JSON.stringify(n)),logger.sendXHRLog(n)}catch(e){globalVar.tracking&&console.log(e)}},this.handleBrowserTabActive=function(){globalVar.is_active||(globalVar.start_time_active_tab=new Number((new Date).getTime()),globalVar.is_active=!0)},this.handleBrowserTabDeactive=function(){globalVar.is_active&&(globalVar.time_on_site=globalVar.time_on_site+(new Number((new Date).getTime())-globalVar.start_time_active_tab),globalVar.is_active=!1)},this.parseIdFromUrl=function(e){return e.match(/^.*-pr([0-9]+)$/)?e.replace(/^.*-pr([0-9]+)$/,"$1"):e.match(/^.*-ar([0-9]+)$/)?e.replace(/^.*-ar([0-9]+)$/,"$1"):e.match(/^.*-fq([0-9]+)$/)?e.replace(/^.*-fq([0-9]+)$/,"$1"):e.match(/^.*-pj([0-9]+)$/)?e.replace(/^.*-pj([0-9]+)$/,"$1"):null},this.getHrefIdFromElement=function(e,t){if(null!=e&&null!=e){var n=e.querySelector("a[href]");if(null!=n&&null!=n){try{t.h=n.getAttribute("href")}catch(e){globalVar.tracking&&console.log(e)}try{t.i=this.parseIdFromUrl(t.h)}catch(e){globalVar.tracking&&console.log(e)}}}},this.updateUserInfoToCookie=function(){try{var e=this.getCookie(LOG_CONSTANTS.COOKIE.USER_INFO_KEY_COOKIE);if(e&&void 0!==e&&""!=e){var t=JSON.parse(decodeURIComponent(e));(t||t.email||t.email!=userInfo.email)&&this.setCookie(LOG_CONSTANTS.COOKIE.USER_INFO_KEY_COOKIE,JSON.stringify(userInfo),LOG_CONSTANTS.THRESHOLD.USER_INFO_KEY_COOKIE)}else this.setCookie(LOG_CONSTANTS.COOKIE.USER_INFO_KEY_COOKIE,JSON.stringify(userInfo),LOG_CONSTANTS.THRESHOLD.USER_INFO_KEY_COOKIE)}catch(e){globalVar.tracking&&console.log(e)}},this.getPageViewDataDesktop=function(){var e=this.createData();try{e.ci=__bannerContext&&null!=__bannerContext&&""!=__bannerContext&&__bannerContext.cateId&&null!=__bannerContext.cateId&&""!=__bannerContext.cateId?__bannerContext.cateId:null}catch(e){globalVar.tracking&&console.log(e)}try{e.di=null!=document.getElementById("hdCboDistrict")?document.getElementById("hdCboDistrict").value:null}catch(e){globalVar.tracking&&console.log(e)}try{e.pi=null!=document.getElementById("hdCboProject")?document.getElementById("hdCboProject").value:null}catch(e){globalVar.tracking&&console.log(e)}try{e.si=null!=document.getElementById("hdCboStreet")?document.getElementById("hdCboStreet").value:null}catch(e){globalVar.tracking&&console.log(e)}try{e.wi=null!=document.getElementById("hdCboWard")?document.getElementById("hdCboWard").value:null}catch(e){globalVar.tracking&&console.log(e)}try{e.cc=null!=document.getElementById("hdCboCity")?document.getElementById("hdCboCity").value:null}catch(e){globalVar.tracking&&console.log(e)}return this.getPageViewDataDestopView(e),this.getPageViewDataDestopListViews(e),e},this.getPageViewDataDestopView=function(e){try{for(var t=document.querySelectorAll('div[class="prd-more-info"] div[style*="width:"]'),n=0;n<t.length;n++){var o="Loại hình tin đăng:";(r=t[n].innerText).includes(o)&&(e.vdi.pt=r.substring(o.length).trim())}}catch(e){globalVar.tracking&&console.log(e)}try{for(t=document.querySelectorAll('div[class="prd-more-info"] div[style*="width:"]'),n=0;n<t.length;n++){var r;o="Ngày đăng:";(r=t[n].innerText).includes(o)&&(e.vdi.dp=r.substring(o.length).trim())}}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.h=this.getCurrentURI(),e.vdi.i=this.parseIdFromUrl(this.getCurrentURI())}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.zn=null!=document.querySelector('span[class*="diadiem-title"] a')&&null!=document.querySelector('span[class*="diadiem-title"] a')?document.querySelector('span[class*="diadiem-title"] a').innerText:null}catch(e){globalVar.tracking&&console.log(e)}try{if(e.vdi.dn=null!=document.querySelector('span[class*="diadiem-title"]')&&null!=document.querySelector('span[class*="diadiem-title"]')?document.querySelector('span[class*="diadiem-title"]').innerText:null,null!=e.vdi.zn&&null!=e.vdi.zn)(n=e.vdi.dn.indexOf(e.vdi.zn))>0&&n+e.vdi.zn.length+3<e.vdi.dn.length&&(e.vdi.dn=e.vdi.dn.substring(n+e.vdi.zn.length+3),e.vdi.dn=e.vdi.dn.trim())}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.a=null!=document.querySelector('span[class="gia-title"] strong')&&null!=document.querySelector('span[class="gia-title"] strong')?document.querySelector('span[class="gia-title"] strong').innerText:null}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.p=null!=document.querySelector('span[class*="gia-title mar-right"] strong')&&null!=document.querySelector('span[class*="gia-title mar-right"] strong')?document.querySelector('span[class*="gia-title mar-right"] strong').innerText.trim():null}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.t=document.title}catch(e){globalVar.tracking&&console.log(e)}try{var i=document.querySelectorAll('div[class*="div-table-cell table"] div[class="row"]');for(var a in i)try{var l=a.querySelector('div[class="left"]').innerText.toLowerCase().trim();"địa chỉ"==l?e.vdi.ad=a.querySelector('div[class="right"]').innerText.trim():"loại tin rao"==l&&(e.vdi.o=a.querySelector('div[class="right"]').innerText.trim())}catch(e){globalVar.tracking&&console.log(e)}}catch(e){globalVar.tracking&&console.log(e)}},this.getPageViewDataDestopListViews=function(e){for(var t=document.querySelectorAll('div[class*="product-list"] div[class*="vip"]'),n=0;t&&null!=t&&n<t.length;n++){var o=t[n],r=this.getPageViewDataDestopListView(o);e.vdis[n]=r}},this.getPageViewDataDestopListView=function(e){var t=new n;this.getLocationFromElement(e,t);try{var o=e.querySelector("a[title]");null!=o&&null!=o&&(t.t=o.title,t.h=o.href,t.i=this.parseIdFromUrl(t.h))}catch(a){globalVar.tracking&&console.log(a)}if(this.getCurrentURI().endsWith("batdongsan.com.vn")||this.getCurrentURI().endsWith("batdongsan.com.vn/"))for(var r=e.querySelectorAll('div[class="left"]'),i=0;null!=r&&null!=r&&i<r.length;i++)try{var a=r[i],l=a.innerText;if(l&&null!=l&&""!=l)switch(l=l.trim().toLowerCase()){case"giá":if(null!=(a=a.parentNode)&&null!=a)if((l=a.innerText)&&null!=l&&""!=l)2==(s=(l=l.trim().toLowerCase()).split(":")).length&&(t.p=s[1].trim());break;case"diện tích":var s;if(null!=(a=a.parentNode)&&null!=a)if((l=a.innerText)&&null!=l&&""!=l)2==(s=(l=l.trim().toLowerCase()).split(":")).length&&(t.a=s[1].trim());break;case"địa chỉ:":case"ðịa chỉ:":case"quận/huyện":if(null!=(a=a.parentNode)&&null!=a){var c=a.querySelector("span");null!=c&&null!=c&&(t.dn=c.innerText);var g=a.querySelector('div[class*="p-bottom-right"]');null!=g&&null!=g&&(t.dp=g.innerText)}}}catch(a){globalVar.tracking&&console.log(a)}else{try{t.p=e.querySelector('span[class*="product-price"]').innerText}catch(a){globalVar.tracking&&console.log(a)}try{t.a=e.querySelector('span[class*="product-area"]').innerText}catch(a){globalVar.tracking&&console.log(a)}try{t.dn=e.querySelector('span[class*="product-city-dist"]').innerText}catch(a){globalVar.tracking&&console.log(a)}try{t.dp=e.querySelector('div[class*="floatright"]').innerText}catch(a){globalVar.tracking&&console.log(a)}}return t},this.getPageViewDataMobile=function(){var e=this.createData();try{e.ci=__bannerContext&&null!=__bannerContext&&""!=__bannerContext&&__bannerContext.cateId&&null!=__bannerContext.cateId&&""!=__bannerContext.cateId?__bannerContext.cateId:null}catch(e){globalVar.tracking&&console.log(e)}try{e.cc=__bannerContext&&null!=__bannerContext&&__bannerContext.cityCode&&null!=__bannerContext.cityCode&&""!=__bannerContext.cityCode?__bannerContext.cityCode:null}catch(e){globalVar.tracking&&console.log(e)}try{e.di=__bannerContext&&null!=__bannerContext&&__bannerContext.districtId&&null!=__bannerContext.districtId&&""!=__bannerContext.districtId?__bannerContext.districtId:null}catch(e){globalVar.tracking&&console.log(e)}try{var t=document.getElementById("ContentPlaceHolder_ProductDetail1_linkProject");t&&null!=t&&t.href&&null!=t.href&&(e.pi=this.parseIdFromUrl(t.href))}catch(e){globalVar.tracking&&console.log(e)}try{if(null!=e.di&&null!=e.di&&""!=e.di){var n=document.getElementById("cboWardProduct");if(n&&null!=n){var o=n.parentElement;if(o&&null!=o){var r=o.querySelector("strong");if(r&&null!=r)if((c=r.innerText)&&null!=c&&!(c=c.toLowerCase().trim()).toLowerCase().includes("--chọn"))for(var i=n.querySelectorAll("option"),a=0;i&&null!=i&&a<i.length;a++){if((u=(d=i[a]).innerText)&&null!=u&&c.toLowerCase().trim()==u.toLowerCase().trim()){e.wi=d.value?d.value:null;break}}}}}}catch(e){globalVar.tracking&&console.log(e)}try{if(null!=e.di&&null!=e.di&&""!=e.di){var l=document.getElementById("cboStreetProduct");if(l&&null!=l){var s=l.parentElement;if(s&&null!=s){var c,g=s.querySelector("strong");if(g&&null!=g)if((c=g.innerText)&&null!=c&&!(c=c.toLowerCase().trim()).toLowerCase().includes("--chọn"))for(i=l.querySelectorAll("option"),a=0;i&&null!=i&&a<i.length;a++){var d,u;if((u=(d=i[a]).innerText)&&null!=u&&c.toLowerCase().trim()==u.toLowerCase().trim()){e.si=d.value?d.value:null;break}}}}}}catch(e){globalVar.tracking&&console.log(e)}return this.getPageViewDataMobileView(e),this.getPageViewDataListMobileViews(e),e},this.getPageViewDataMobileView=function(e){try{for(var t=document.querySelectorAll('div[class="o-info"] div[class="o-i-field"]'),n=0;n<t.length;n++)try{var o=t[n],r=o.innerText;if(r.toLowerCase().includes("Loại tin đăng".toLowerCase()))2==(i=o.querySelectorAll("span")).length&&(e.vdi.pt=i[1].innerText);else if(r.toLowerCase().includes("Ngày đăng tin".toLowerCase())){2==(i=o.querySelectorAll("span")).length&&(e.vdi.dp=i[1].innerText)}else if(r.toLowerCase().includes("địa chỉ".toLowerCase())){2==(i=o.querySelectorAll("span")).length&&(e.vdi.ad=i[1].innerText)}else if(r.toLowerCase().includes("loại tin rao".toLowerCase())){var i;2==(i=o.querySelectorAll("span")).length&&(e.vdi.o=i[1].innerText)}}catch(e){globalVar.tracking&&console.log(e)}}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.h=this.getCurrentURI(),e.vdi.i=this.parseIdFromUrl(this.getCurrentURI())}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.a=null!=document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_Area"] span[class*="value"]')&&null!=document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_Area"] span[class*="value"]')?document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_Area"] span[class*="value"]').innerText:null}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.p=null!=document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_price"] span[class*="value"]')&&null!=document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_price"] span[class*="value"]')?document.querySelector('div[id="ContentPlaceHolder_ProductDetail1_price"] span[class*="value"]').innerText:null}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.t=document.title}catch(e){globalVar.tracking&&console.log(e)}try{e.vdi.zn=null!=document.querySelector('div[class*="diadiem-title"] a')&&null!=document.querySelector('div[class*="diadiem-title"] a')?document.querySelector('div[class*="diadiem-title"] a').innerText.trim():null}catch(e){globalVar.tracking&&console.log(e)}try{if(e.vdi.dn=null!=document.querySelector('div[class*="diadiem-title"]')&&null!=document.querySelector('div[class*="diadiem-title"]')?document.querySelector('div[class*="diadiem-title"]').innerText.trim():null,null!=e.vdi.zn&&null!=e.vdi.zn)(n=e.vdi.dn.indexOf(e.vdi.zn))>0&&n+e.vdi.zn.length+3<e.vdi.dn.length&&(e.vdi.dn=e.vdi.dn.substring(n+e.vdi.zn.length+3),e.vdi.dn=e.vdi.dn.trim())}catch(e){globalVar.tracking&&console.log(e)}},this.getPageViewDataListMobileViews=function(e){for(var t=document.querySelectorAll('ul[class*="s-list"] li,ul[id="ul_for"] li'),n=0;t&&null!=t&&n<t.length;n++){var o=t[n],r=this.getPageViewDataMobileListView(o);e.vdis[n]=r}},this.getPageViewDataMobileListView=function(e){var t=new n;if(this.getLocationFromElement(e,t),this.getHrefIdFromElement(e,t),document.URL.match(/^.*-pr(\d+)$/)){try{if(null!=(a=e.querySelector('div[class="sr-info"]'))&&null!=a)(l=a.querySelector("span"))&&null!=l&&(t.p=l.innerText,null!=t.p&&null!=t.p&&(t.p=t.p.trim())),null!=(a=e.querySelector("h3"))&&null!=a&&(t.t=a.innerText,null!=t.t&&null!=t.t&&(t.t=t.t.trim()))}catch(r){globalVar.tracking&&console.log(r)}try{t.zn=null!=document.querySelector('div[class*="diadiem-title"] a')&&null!=document.querySelector('div[class*="diadiem-title"] a')?document.querySelector('div[class*="diadiem-title"] a').innerText:null}catch(r){globalVar.tracking&&console.log(r)}}else if(this.getCurrentURI().endsWith("batdongsan.com.vn")||this.getCurrentURI().endsWith("batdongsan.com.vn/")){var o=e.querySelectorAll('span[class="sp-info"]');if(null!=o&&3==o.length)try{t.p=o[0].innerText,t.a=o[1].innerText,t.dn=o[2].innerText.trim()}catch(r){globalVar.tracking&&console.log(r)}}else{try{var r=e.querySelector('span[class="sp-info sp-address"]');t.dp=r.querySelector("span").innerText.trim();var i=r.childNodes[0];t.dn=i.data.trim()}catch(r){globalVar.tracking&&console.log(r)}try{var a;(a=e.querySelector('div[class="sp-info sp-area"]'))&&null!=a&&(t.a=a.innerText.trim())}catch(r){globalVar.tracking&&console.log(r)}try{var l;(l=e.querySelector('span[class="sp-info sp-gia"]'))&&null!=l&&(t.p=l.innerText)}catch(r){globalVar.tracking&&console.log(r)}}return t}}catch(e){globalVar.tracking&&console.log(e)}}var logger=new Logger;function loggerAddSearchBoxEventLog(){try{for(var e=0;e<LOG_CONSTANTS.ID_SEARCH_BOXS.length;e++){var t=LOG_CONSTANTS.ID_SEARCH_BOXS[e];null!=document.getElementById(t)&&null!=document.getElementById(t)&&document.getElementById(t).addEventListener("keyup",function(e){e.keyCode==LOG_CONSTANTS.KEY_CODE.ENTER&&logger.enterUpLog()})}}catch(e){globalVar.tracking&&console.log(e)}}function loggerUpdateUserInfo(){try{var e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE&&e.status>=200&&e.status<300){var t=e.responseText;if(t){var n=JSON.parse(t);n&&null!=n&&n.email&&void 0!==n.email&&""!=n.email&&n.email!=userInfo.email&&(userInfo.email=n.email,userInfo.mobile=n.mobile,userInfo.name=n.name,userInfo.id=n.id,userInfo.identify_card_number=n.identify_card_number,userInfo.age=n.age,userInfo.time=(new Date).getTime(),logger.updateUserInfoToCookie())}}},e.open("GET",LOG_CONSTANTS.URL.USER_HANDLER,!0),e.withCredentials=!0,e.send()}catch(e){globalVar.tracking&&console.log(e)}}var allKeyLocalStorage=Object.keys(localStorage);try{for(var i=0;i<allKeyLocalStorage.length;i++){if((key=allKeyLocalStorage[i]).startsWith(LOG_CONSTANTS.LOCAL_STORAGE.LOG_TIME_ON_SITE_KEY))if((logTimeOnSiteStr=localStorage.getItem(key))&&void 0!==logTimeOnSiteStr&&""!=logTimeOnSiteStr){var logTimeOnSiteObj=JSON.parse(logTimeOnSiteStr);localStorage.removeItem(key),logger.sendLog(logTimeOnSiteObj)}}}catch(e){globalVar.tracking&&console.log(e)}try{for(i=0;i<allKeyLocalStorage.length;i++){var logTimeOnSiteStr;if((key=allKeyLocalStorage[i]).startsWith(LOG_CONSTANTS.LOCAL_STORAGE.LOG_CLICK_COOKIE_KEY))if((logTimeOnSiteStr=localStorage.getItem(key))&&void 0!==logTimeOnSiteStr&&""!=logTimeOnSiteStr){var logClickObj=JSON.parse(logTimeOnSiteStr);localStorage.removeItem(key),logger.sendLog(logTimeOnSiteObj)}}}catch(e){globalVar.tracking&&console.log(e)}try{for(i=0;i<allKeyLocalStorage.length;i++){var key;if((key=allKeyLocalStorage[i]).startsWith(LOG_CONSTANTS.LOCAL_STORAGE.LOG_ENTER_UP_COOKIE_KEY)){var logEnterUpStr=localStorage.getItem(key);if(null!=logEnterUpStr&&void 0!==logEnterUpStr&&""!=logEnterUpStr){var logEnterUpObj=JSON.parse(logEnterUpStr);localStorage.removeItem(key),logger.sendLog(logEnterUpObj)}}}}catch(e){globalVar.tracking&&console.log(e)}try{var userInfoStr=logger.getCookie(LOG_CONSTANTS.COOKIE.USER_INFO_KEY_COOKIE),needGetUserInfo=!0;if(userInfoStr&&void 0!==userInfoStr&&""!=userInfoStr){var objUserInfo=JSON.parse(decodeURIComponent(userInfoStr));null!=objUserInfo&&null!=objUserInfo&&null!=objUserInfo.email&&null!=objUserInfo.email&&(userInfo.name=objUserInfo.name,userInfo.mobile=objUserInfo.mobile,userInfo.email=objUserInfo.email,userInfo.id=objUserInfo.id,userInfo.identify_card_number=objUserInfo.identify_card_number,userInfo.age=objUserInfo.age,userInfo.time=objUserInfo.time,userInfo.time+864e5<(new Date).getTime()&&(needGetUserInfo=!1))}needGetUserInfo&&loggerUpdateUserInfo()}catch(e){globalVar.tracking&&console.log(e)}try{var ipInformation=logger.getIPLocationAddress();(ipInformation||null==ipInformation)&&logger.getIPLocationAddressFromAPI()}catch(e){globalVar.tracking&&console.log(e)}try{LOG_CONSTANTS.current_pagey_offset=window.pageYOffset,globalVar.loadedTime=(new Date).getTime(),globalVar.isLogPageView||(globalVar.isLogPageView=!0,logger.pageViewLog())}catch(e){globalVar.tracking&&console.log(e)}try{globalVar.loggerAndSearchTextBox||(globalVar.loggerAndSearchTextBox=!0,loggerAddSearchBoxEventLog())}catch(e){globalVar.tracking&&console.log(e)}try{globalVar.addMouseClickEvent||(globalVar.addMouseClickEvent=!0,window.addEventListener?window.addEventListener("mousedown",function(e){logger.mouseClickLog(e)}):window.attachEvent&&window.attachEvent("mousedown",function(e){logger.mouseClickLog(e)}))}catch(e){globalVar.tracking&&console.log(e)}try{globalVar.addScrollLog||(globalVar.addScrollLog=!0,window.onscroll=function(){globalVar.lastScrollTime=(new Date).getTime(),setTimeout(function(){logger.scrollLog()},LOG_CONSTANTS.THRESHOLD.SCROLL_TIMEOUT)})}catch(e){globalVar.tracking&&console.log(e)}try{globalVar.addBeforeUnload||(globalVar.addBeforeUnload=!0,window.addEventListener?window.addEventListener("beforeunload",function(){logger.handleBrowserTabDeactive(),logger.timeOnSiteLog()}):window.attachEvent&&window.attachEvent("beforeunload",function(){logger.handleBrowserTabDeactive(),logger.timeOnSiteLog()}))}catch(e){globalVar.tracking&&console.log(e)}try{globalVar.addMouseMoveAndStopEvent||(globalVar.addMouseMoveAndStopEvent=!0,window.addEventListener?window.addEventListener("mousemove",function(e){logger.mouseMoveAndStopLog(e)}):window.attachEvent&&window.attachEvent("mousemove",function(e){logger.mouseMoveAndStopLog(e)}))}catch(e){globalVar.tracking&&console.log(e)}try{var script_imported=document.createElement("script");script_imported.src=LOG_CONSTANTS.URL.EXPERIMENTAL_DESIGN_JS,null!=document.body&&null!=document.body?document.body.appendChild(script_imported):document.head.appendChild(script_imported)}catch(e){globalVar.tracking&&console.log(e)}globalVar.start_time_active_tab=new Number((new Date).getTime()),document.addEventListener("visibilitychange",function(){document.hidden?logger.handleBrowserTabDeactive():logger.handleBrowserTabActive()},!1),window.addEventListener("focus",function(){logger.handleBrowserTabActive()},!1),window.addEventListener("blur",function(){logger.handleBrowserTabDeactive()},!1);